# EC2(Elastic Computer Cloud)

- 가상 컴퓨터 인스턴스를 제공하는 서비스
- 가상 서버(컴퓨터) => 인스턴스라고 하는 독립된 컴퓨터들을 임대받는 것
- 각각의 인스턴스 => 컴퓨터 1대

### 📌 특징
---
1) 유연한 가상 컴퓨팅
	- 몇 분 내에 용량을 조절 가능
	- 한 개, 수백 개 또는 수천 개의 서버 인스턴스를 동시에 지정 가능
	- Amazon EC2 Auto Scailing을 통해 EC2 플릿의 가용성을 유지하고, 필요에 따라 집합을 자동으로 확장 및 축소하여 성능을 극대화하여 비용 최소화. (여러 서비스의 크기를 조정하기 위해서는 AWS Auto Scailing 사용)
2) 클라우드 호스팅 서비스
	- 선택한 운영체제 및 애플리케이션에 가장 적합한 메모리 구성, CPU, 인스턴스 스토리지, 부팅 파티션 크기 중 사용자가 원하는 대로 선택기능
3) 통합성
	- S3(저장 장치), RDS(데이터베이스) 및 Amazon VPC 등 서비스 구축에 필수적인 대부분의 AWS 서비스와 통합되어 있기 때문에 컴퓨팅, 쿼리 처리 및 광범위한 애플리케이션 간 클라우드 스토리지에 대해 완전하고 안전한 솔루션 제공
4) 우수한 보안
	- EC2는 VPC와 함께 작동해 사용자 컴퓨팅 리소스에 보안성 및 강력한 네트워킹 기능 제공


### 📌 주요 구성
---
1) 인스턴스
	- 하나의 가상 서버 AMI에서 다양한 인스턴스 유형 실행가능
	- 인스턴스 유형에 따라 사용되는 호스트 컴퓨터의 하드웨어가 결정되며, 각 인스턴스 유형은 서로 다른 컴퓨팅 및 메모리 기능 제공
		-> 인스턴스에서 실행하려는 애플리케이션 또는 소프트웨어에 필요한 메모리 양과 컴퓨팅 파워를 기준으로 AWS 인스턴스 유형 선택
1) EBS(Elastic Block Store)
	- 일반 PC에서 하드디스크 개념
	- EC2 인스턴스에 사용할 블록 스토리지 볼륨을 제공하며 EBS 볼륨은 가용 영역 내에 자동으로 복제되어 구성요소 장애로부터 보호해주고, 고가용성 및 내구성 제공
	- 워크로드 실행에 필요한 지연 시간이 짧고 일관된 성능을 제공하고 단 몇 분 내에 사용량을 많게 또는 적게 확장할 수 있으며, 프로비저닝한 부분에 대해서만 저렴한 비용을 지불함
1) AMI(Amazon Machine Image)
	- 인스턴스를 실행하기 위한 소프트웨어 구성(ex. OS, 애플리케이션 서버, 애플리케이션, CPU 프로세서타입 등) 이 기재된 템플릿
	- 서버에 필요한 운영체제와 다양한 소프트웨어로 구성된 템플릿이며, AWS에서는 이미지라고 불림


### 📌 인스턴스 타입
---
- 이름 형식
	![](https://i.imgur.com/prIzAyj.png)

- 종류
1) 범용 (M)
	\- 컴퓨팅 메모리 및 네트워크의 리소스를 균형 있게 적용
	중소형 DB 혹은 기타 일반적인 애플리케이션에 적합
	\- M5는 많은 양의 컴퓨팅 파워가 필요한 작업이나 일반적인 서비스 운영에 적합
1) 마이크로 (T)
	\- 인스턴스 크기별 기본 수준의 CPU성능을 제공하며 범용(M)에 비해 성능은 떨어지지만 가격 저렴
	\- 소규모 웹이나 마이크로서비스 혹인 개발 환경에 적합
	\- 일반적인 용도를 위한 인스턴스로 T2가 저렴하고 작은 규모의 컴퓨팅 파워에 적합
1) 컴퓨팅 최적화 (C)
	\- 가장 높은 수준의 컴퓨팅 파워를 제공
	\- 고성능의 프론트엔드나 웹서버 혹은 게임 등의 처리에 적합
4) 스토리지 최적화 (I, D, H)
	\- I 유형 : SSD 기반의 초고속 랜덤 I/O 성능을 제공하며 NoSQL, Database에 적합
	\- H 유형 : HDD 기반의 높은 디스크 처리량 제공
5) 메모리 최적화 (X,R)
	\- X 유형 : 인메모리 기반의 DB나 메모리 기반의 빅데이터 처리에 최적화
	\- R 유형 : 메모리를 집중적으로 사용
6) 가속화된 컴퓨팅 (G, P, F)
	\- GPU 및 FPGA를 이용한 높은 컴퓨팅 애플레이션을 제공
	\- 3D 작업이나 머신러닝 채굴 등에 이용

- 성능 비교
	\- nano < micro < small < medium < large < xlarge < 2xlarge nano
	\- xlarge부터는 앞자리 숫자가 높을수록 성능이 더 좋은 인스턴스


### 📌 EC2 Instance 시작
---
![](https://i.imgur.com/L4amFOP.png)
`인스턴스 생성시 사용하는 주요 구성요소들이 포함된 다이어그램`
- 이미지 - 인스턴스에서 실행할 소프트웨어`(ex. Linux, macOS, Ubuntu, Windows...)`가 포함된 템플릿
- 키 페어  
	\- 인스턴스에 연결할 때 ID를 증명하는 데 사용하는 보안 자격 증명 세트.
	\- 퍼블릭 키는 인스턴스에, 프라이빗 키는 컴퓨터에 있음
- 네트워크
	\- VPC(Virtual Private Cloud) : AWS 계정 전용 가상 네트워크
	\- 각 AWS 리전에 기본 VPC가 제공되며, VPC에는 각 가용 영역에 기본 서브넷이 있음
- 보안 그룹
	\- 인바운드 및 아웃바운드 트래픽을 제어하는 가상 방화벽 역할
- EBS 볼륨
  \- 이미지의 루트 볼륨이 필요함, 필요에 따라 추가 가능

###### 🏷️ 인스턴스 생성 단계
1. 이름 및 태그: 인스턴스 이름 기입
2. 애플리케이션 및 OS 이미지(Amazon Machine Image) : 사용할 OS 선택
3. 인스턴스 유형 : 적합한 유형 선택
4. 키 페어(로그인) : 기존 키 페어를 선택하거나 새 키 페어 생성
5. 네트워크 설정 :
	1. 다른 VPC, 서브넷을 선택하기 위해 편집버튼을 클릭
	2. 원하는 VPC와 서브넷을 지정
	3. 퍼블릭 접근을 위해서는 퍼블릭 IP 자동 할당 활성화
	4. 보안 그룹 생성 또는 기존 보안 그룹을 선택해서 인바운드/아웃바운드 규칙 지정
		`보안 그룹에 네트워크 연결 트래픽을 허용하는 규칙이 없는 경우 인스턴스에 연결불가`
	5. 특정 네트워크로 연결 트래픽을 제한하려면 위치 무관대신 사용자 지정을 선택하고, 네트워크에 대한 CIDR 블록 입력

``` ad-note
title: 퍼블릭 서브넷(Public Subnet) VS 프라이빗 서브넷(Private Subnet)
color: 255, 255, 255
collapse: close

AWS에서 인스턴스를 생성할때 퍼블릭 서브넷과 프라이빗 서브넷의 선택은 보안 요구사항 및 인스턴스의 역할에 따라 달라진다.

1) 퍼블릭 서브넷 (Public Subnet)
	\- 인터넷 게이트웨이(Internet Gateway)와 연결된 라우팅 테이블을 가지며, 인스턴스가 인터넷과 직접 통신 가능
	
	\- 사용 사례 :
	1. 웹 서버 - 인터넷에서 직접 접근할 수 있어야 하는 경우
	2. 배스천 호스트(Bastion Host) - 프라이빗 서브넷의 인스턴스에 접근하기 위한 중개 서버
	3. API 엔드포인트 : 외부 서비스와 상호작용해야 하는 경우

	\- 보안 고려사항 :
	- 퍼블릭 IP를 가지며, 보안 그룹 및 네트워크 ACL로 접근을 제한해야 함
	- 적절한 보안 규칙을 설정하여 불필요한 포트나 IP에서의 접근을 차단해야 함


2) 프라이빗 서브넷(Private Subnet)
	\- 인터넷 게이트웨이(Internet Gateway)와 연결되지 않으며, 인스턴스는 NAT 게이트웨이 또는 NAT 인스턴스를 통해서만 인터넷에 접근 가능

	\- 사용 사례 :
	1. 데이터베이스 서버 - 외부에서 접근할 필요가 없는 경우
	2. 내부 애플리케이션 서버 - 다른 내부 서비스와만 상호작용하는 경우
	3. 백엔드 서비스 - 인터넷에 직접 노출될 필요가 없는 경우

	\- 보안 고려사항 :
	- 인터넷 접근이 제한되므로, NAT 게이트웨이를 통해 필요한 경우에만 인터넷에 접근 가능
	- 민감한 데이터를 처리하는 인스턴스의 경우, 추가적인 보안 조치 적용 가능
``` 
6. 스토리지 구성 : 루트 볼륨 지정

	